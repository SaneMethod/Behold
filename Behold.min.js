(function(h,f,e){function d(a){this.cid=e.uniqueId("view");this.options=a||{};this.$=f;this._=e;this._setOptions();this._setEl();this.bindUI();this.attachEvents();this.initialize.apply(this,arguments)}e=e||function(){var a=0,c=/(.)^/,b={"'":"&#39;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","\\":"\\","/":"&#x2F","\r":"r","\n":"<br />","\u2028":"u2028","\u2029":"u2029"},g=new RegExp(Object.keys(b).join("|")+"/g"),d={isObject:function(a){return-1!==["function","object"].indexOf(typeof a)&&!!a}, extend:function(a){var c,b;if(!this.isObject(a))return a;for(var g=1,d=arguments.length;g<d;g++)c=arguments[g],this.isObject(c)&&(b=Object.keys(c),b.forEach(function(b){a[b]=c[b]}));return a},uniqueId:function(c){return c?c+(++a+""):++a+""},escape:function(a){return a.replace(g,function(a){return b[a]})},templateSettings:{interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},template:function(a,b){b=this.extend({},this.templateSettings,b);var g=RegExp([(b.escape||c).source,(b.interpolate||c).source].join("|"), "g"),e=function(a,c,b,g,e){if(b)return d.escape(b.trim());if(g)return a[g.trim()]};return function(b){return a=a.replace(g,e.bind(this,b))}}};return d}();d.prototype._setOptions=function(){var a=this.options,c="el id tagName className ui events".split(" "),b;a&&(b=Object.keys(a),b.forEach(function(b){-1!==c.indexOf(b)&&(this[b]=a[b])},this))};d.prototype._setEl=function(){var a={},c=this.tagName;this.el?this.$el=f(this.el):(a=e.extend(a,this.options.attributes),a["class"]=this.className||"",a.id= this.id||"",this.$el=a=f("<"+c+"></"+c+">").attr(a),this.el=a[0])};d.prototype.getUISelector=function(a,c){var b;for(b=a[c];0===b.indexOf("@ui.");)b=b.split(" "),b=a[b[0].substr(4)]+" "+b.slice(1).join(" ");return b};d.prototype.bindUI=function(){var a=e.extend({},this._uiBindings||this.ui);if(!a||0===Object.getOwnPropertyNames(a).length)return this;this._uiBindings||(this._uiBindings=e.extend({},a));Object.keys(a).forEach(function(c){var b=this.getUISelector(a,c);this.ui[c]=this.$el.find(b)},this); return this};d.prototype.unBindUI=function(){var a=this.ui;if(!a||!this._uiBindings)return this;Object.keys(a).forEach(function(a){delete this.ui[a]},this);this.ui=e.extend({},this._uiBindings);delete this._uiBindings;return this};d.prototype.attachEvents=function(){var a=this,c=this.ui,b=this.events,g=this.cid,d;b&&(d=Object.keys(b),d.forEach(function(d){var e=b[d],e="function"===typeof e?e:a[e];d=d.split(" ");(0===d[1].indexOf("@ui.")?c[d[1].substr(4)]:f(d[1])).on(d[0]+".dgbehold"+g,e.bind(a))})); return this};d.prototype.detachEvents=function(){var a=this.ui,c=this.events,b=this.cid;c&&(c=Object.keys(c),c.forEach(function(c){c=c.split(" ");(0===c[1].indexOf("@ui.")?a[c[1].substr(4)]:f(c[1])).off(".dgbehold"+b)}));return this};d.prototype.remove=function(){this.detachEvents();this.$el.remove();return this};d.prototype.setElement=function(a,c,b){this.$el&&!b&&(this.detachEvents(),this.unBindUI());this.$el=a instanceof f?a:f(a);this.el=this.$el[0];c||(this.bindUI(),this.attachEvents());return this}; d.prototype.initialize=function(){};d.extend=function(a,c){a=a||{};c=c||{};var b=this,d,f;d=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return b.apply(this,arguments)};e.extend(d,b,c);f=function(){this.constructor=d};f.prototype=b.prototype;d.prototype=new f;e.extend(d.prototype,a);d.__super__=b.prototype;return d};d.Application=function(){this.modules={}};d.Application.prototype.start=function(){var a=this.modules,c;for(c in a)a.hasOwnProperty(c)&&a[c].initialize&&"function"===typeof a[c].initialize&& a[c].initialize()};d.Application.prototype.module=function(a,c){if(!c)return this.modules[a];var b={},d=[b,this,f,e].concat(Array.prototype.slice.call(arguments,2));c.apply(b,d);this.modules[a]=b;return this.modules[a]};h.Behold=d})(window,jQuery,_);